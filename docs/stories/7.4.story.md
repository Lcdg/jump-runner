# Story 7.4: UI Tactile (Boutons & Skin Selector)

## Status

Draft

## Story

**As a** mobile player,
**I want** touch-friendly buttons to access game features,
**so that** I can start the game and change skins without a keyboard.

## Acceptance Criteria

1. Bouton "Skins" (icÃ´ne ðŸŽ¨) visible en Attract Mode, zone tactile â‰¥ 44px
2. SÃ©lecteur de skin navigable par tap sur flÃ¨ches ou swipe gauche/droite
3. Zone de tap "Play" clairement indiquÃ©e en Attract Mode (gros bouton ou texte tapable)
4. Textes d'indication adaptÃ©s au contexte : "Tap to Start" sur mobile, "Press Space to Start" sur desktop
5. Le hint skins s'adapte : "Tap ðŸŽ¨ to change skin" sur mobile vs "Press S to change skin" sur desktop
6. Feedback visuel au tap sur les boutons (lÃ©gÃ¨re animation ou changement de couleur)
7. Tests unitaires pour le swipe et les zones tactiles
8. `npm run lint` passe
9. `npm run test:run` passe
10. `npm run build` passe

## Tasks / Subtasks

- [ ] **Task 1: Ajouter le bouton Skins tactile** (AC: 1, 5)
  - [ ] Dessiner un bouton ðŸŽ¨ en bas Ã  droite de l'Ã©cran en Attract Mode
  - [ ] Zone tactile de 48x48px minimum
  - [ ] Tap sur le bouton â†’ toggle skin selector
  - [ ] Utiliser `isTouchDevice()` pour n'afficher le bouton que sur mobile
  - [ ] Sur desktop, garder l'indication "Press S to change skin"

- [ ] **Task 2: Adapter les textes selon la plateforme** (AC: 4, 5)
  - [ ] Attract overlay : "Tap to Start" (mobile) vs "Press Space to Start" (desktop)
  - [ ] Skin hint : "Tap ðŸŽ¨ to change skin" (mobile) vs "Press S to change skin" (desktop)
  - [ ] Game Over : "Tap to Restart" (mobile) vs "Press Space to Restart" (desktop)
  - [ ] Skin selector close : "Tap ðŸŽ¨ or swipe to close" (mobile) vs "Press S or ESC to close" (desktop)

- [ ] **Task 3: Ajouter le swipe dans le skin selector** (AC: 2)
  - [ ] DÃ©tecter le swipe gauche/droite dans `SkinSelector` (touchstart â†’ touchend delta X)
  - [ ] Seuil de swipe : 50px minimum pour Ã©viter les faux positifs
  - [ ] Swipe gauche â†’ skin prÃ©cÃ©dent, swipe droite â†’ skin suivant

- [ ] **Task 4: Ajouter le feedback visuel au tap** (AC: 6)
  - [ ] LÃ©gÃ¨re rÃ©duction d'opacitÃ© (0.7) pendant le tap sur les boutons
  - [ ] Ou lÃ©ger changement de couleur pendant 100ms
  - [ ] Appliquer sur le bouton skins et les flÃ¨ches du sÃ©lecteur

- [ ] **Task 5: Tests et Validation** (AC: 7, 8, 9, 10)
  - [ ] Tests : swipe detection (delta X calcul)
  - [ ] Tests : textes adaptÃ©s selon isTouchDevice
  - [ ] `npm run lint` passe
  - [ ] `npm run test:run` passe
  - [ ] `npm run build` passe

## Dev Notes

### DÃ©pendances

- **Requiert Story 7.1** (platform.ts `isTouchDevice()`)
- **Requiert Story 7.2** (touch events de base fonctionnels)
- **Requiert Story 7.3** (layout adaptatif pour positionner les boutons)

### Code actuel

- `src/ui/SkinSelector.ts` : overlay avec flÃ¨ches â—„/â–º cliquables, `handleClick()` pour la souris
- `src/core/Game.ts` : `renderAttractOverlay()` affiche "Press Space to Start" et "Press S to change skin"
- `src/core/Game.ts` : `renderGameOverOverlay()` affiche "Press Space to Restart"

### Swipe detection

```typescript
// Sur touchstart : stocker la position X initiale
// Sur touchend : calculer deltaX = endX - startX
// Si |deltaX| > 50px â†’ swipe dÃ©tectÃ©
// deltaX > 0 â†’ swipe droite (skin suivant)
// deltaX < 0 â†’ swipe gauche (skin prÃ©cÃ©dent)
```

### Source tree impactÃ©

```
src/ui/SkinSelector.ts        # MODIFIÃ‰ (swipe, feedback)
src/core/Game.ts              # MODIFIÃ‰ (textes adaptatifs, bouton skins)
```

## Testing

| Type | Framework | Location |
|------|-----------|----------|
| Unit | Vitest | tests/unit/ui/SkinSelector.test.ts (update) |

### Standards de test
- Mocker `isTouchDevice()` pour tester les deux chemins (mobile/desktop)
- Simuler des touch events pour le swipe

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-01 | 1.0 | Story crÃ©Ã©e | PO Agent (Sarah) |
